---
title: "10.1 空闲超时"
anchor: "10.1_Idle_Timeout"
weight: 1010
rank: "h2"
---

如果任一终端在其传输参数（详见[第18.2章]()）中指定了`max_idle_timeout`（最大空闲超时时间），且某个连接持续空闲的时间超过了两个终端宣告的`max_idle_timeout`中的较小值，那么这个连接就会被静默关闭，并且它的状态会被丢弃。

每个终端都宣告`max_idle_timeout`，但是只取两个值中较小的那一个（或只取有效的那个值，如果只有一个终端宣告了非零值）作为终端使用的有效值。通过宣告`max_idle_timeout`，终端承诺，如果它要在空闲时间还未达到上述有效值时就放弃一条连接，那么它会发起立即关闭（详见[第10.2章]()）。

当成功接收且处理了一个来自对端的数据包时，终端重启它的空闲计时器。当正要发送ACK触发包时，如果自上一次接收并处理数据包后还没有发送过任何ACK触发包，那么终端也会重启它的空闲计时器。在发送数据包时重启这个计时器确保新的活动被发起后连接不会被马上关闭。

为了避免过小的空闲超时时间，终端{{< req_level MUST >}}提高空闲超时时间至少到当前探测包超时时间（PTO）的三倍。这使得在空闲超时前有充足的时间供数个探测包被发送和丢失。
