---
title: "4.2. 提高流量控制限制"
anchor: "4.2_Increasing_Flow_Control_Limits"
weight: 420
rank: "h2"
---

QUIC实现决定什么时候以什么额度通过**最大流数据帧**及**最大数据帧**提高流量控制限制，但是本章提出了一些注意事项。

为了避免阻塞发送方，接收方{{< req_level MAY >}}在一个往返时间（RTT）内多次发送一个**最大流数据帧**或**最大数据帧**，或者尽可能早地发送，从而为帧的丢失及随后的恢复留出时间。

控制帧也会引入连接开销。
也就是说频繁发送**最大流数据帧**及**最大数据帧**做极其微小的调整是不可取的。
另一方面，如果更新不够频繁，每次更新时就要对接收方上限做更大幅度的提升以防发送方被阻塞，使得接收方耗费需要更多资源。
因此，确定决定接收方推荐上限需要权衡资源耗费与连接开销。

接收方可以使用一个常见于TCP实现的基于往返时间及接收数据应用层消耗速率的自动调谐机制来调整推荐接收上限的频率和增量。
作为优化，终端只有在有其他帧要发送时才可以发送流量控制相关帧，以确保流量控制不会导致额外的数据包发送。

被阻塞发送方不一定发送**流阻塞帧**或**数据阻塞帧**。
因此，接收方{{< req_level MUST_NOT >}}能在发送**最大流数据帧**及**最大数据帧**前等待接收**流阻塞帧**或**数据阻塞帧**，否则可能导致发送方在连接的其余部分被阻塞。
即使发送方发送了这些帧，等待它们也会导致发送方至少被阻塞一个完整的往返周期。

当终端在阻塞期间收到可发送数据额度时，它可能会回复大量数据，造成短暂的拥塞，详见《[QUIC恢复](../RFC9002_Chinese_Translation)》[第7.7章](../RFC9002_Chinese_Translation/#7.7_Pacing)有关终端如何避免这类拥塞的讨论。

{{% block note %}}
**秋航注**：这里将credit翻译为额度、增量等，指的是**最大流数据帧**及**最大数据帧**所带来的接收方新流量控制上限相对之前的提升量，这个提升量是发送方后续可发送新数据的空间。
{{% /block %}}