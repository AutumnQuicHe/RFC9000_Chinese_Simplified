---
title: "9.3 响应连接迁移"
anchor: "9.3_Responding_to_Connection_Migration"
weight: 930
rank: "h2"
---

从新的对端地址接收到一个包含非探测帧的数据包表明对端已经迁移到那个地址。

如果接收方承认这次迁移，那它{{< req_level MUST >}}改向新的对端地址发送后续数据包，并且，如果还没有发起，则{{< req_level MUST >}}发起路径验证（详见[第8.2章](#8.2_Path_Validation)）来验证对端对那个地址的所有权。如果接收方没有来自对端的尚未使用的连接ID，那么在对端提供一个之前它将无法在新路径上发送任何数据，详见[第9.5章](#9.5_Privacy_Implications_of_Connection_Migration)。

终端仅在响应具有最大数据包号的非探测数据包时改变他将数据包发向的地址。这确保终端不会在接收到乱序数据包时将数据包发向旧的对端地址。

终端{{< req_level MAY >}}向未经验证的对端地址发送数据，但它{{< req_level MUST >}}抵御如[第9.3.1章](#9.3.1_Peer_Address_Spoofing)和[第9.3.2章](#9.3.2_On-Path_Address_Spoofing)所述的潜在攻击。如果对端地址最近被见到过，那么终端{{< req_level MAY >}}跳过验证。特别是，如果终端在检测到某些形式的虚假迁移后返回先前验证过的路径，那么跳过地址验证并恢复丢包检测和拥塞控制状态可以减少由攻击带来的性能影响。

终端在改变它将非探测数据包发向的地址后，它可以放弃为其他地址进行的路径验证。

接收到一个来自新对端地址的数据包可能是对端遭遇NAT重绑定的结果。

在验证新的客户端地址后，服务器{{< req_level SHOULD >}}向客户端发送新的地址验证令牌（详见[第8章](#8_Address_Validation)）。
