---
title: "5.2 数据包与连接如何匹配"
anchor: "5.2_Matching_Packets_to_Connections"
weight: 520
rank: "h2"
---

入包在接收时进行分类。
数据包可能被关联到一个已存在的连接，也可能（在服务端）创建一个新连接。

终端尝试将数据包与现有连接关联起来。
如果数据包有关联到一个已存在的连接的非零目标连接ID，QUIC将在相应连接上处理该数据包。
注意一条连接可以对应不止一个连接ID，详见[第5.1章](#5.1_Connection_ID)。

如果一个数据包的目标连接ID是零长度的，而且其地址信息与终端用来标识零长度连接ID的连接匹配，则QUIC将该数据包作为该连接的一部分处理。
终端可以只使用目标IP和端口，也可以同时使用源地址和目标地址作为标识，尽管这样会使连接像[第5.1章](#5.1_Connection_ID)描述的那样变得脆弱。

对任何不属于已存在连接的数据包，终端都可以发送一个无状态重置（[第10.3章](#10.3_Stateless_Reset)）。无状态重置使对端能更快地识别连接变得不可用的情况。

初始化、重试或版本协商这种缺乏强完整性保护的无效包{{< req_level MAY >}}被丢弃。
如果终端在发生错误前处理了这些包的内容，终端{{< req_level MUST >}}产生一个连接错误，或完全恢复处理期间所做的所有变更。