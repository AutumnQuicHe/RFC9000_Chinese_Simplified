---
title: "17.2.5.2 处理重试数据包"
anchor: "17.2.5.2_Handling a Retry Packet"
weight: 1725.2
rank: "h2"
---

对于单次连接尝试，客户端{{< req_level MUST >}}接受和处理至多一个重试数据包。在客户端已经接收和处理来自服务器的初始数据包或重试数据包之后，它{{< req_level MUST >}}丢弃后续接收到的任何重试数据包。

对于重试完整性标签无法被验证的重试数据包，客户端{{< req_level MUST >}}丢弃它们，详见《[QUIC-TLS]()》的[第5.8章]()。这会降低攻击者注入重试数据包的能力并且保护重试数据包免于意外受损。客户端{{< req_level MUST >}}丢弃重试令牌字段长度为零的重试数据包。

作为重试数据包的回复，客户端使用包含了前者提供的重试令牌的初始数据包来继续连接的建立过程。

客户端使用来自重试数据包中源连接ID字段的值，作为这个初始数据包的目标连接ID字段。更改目标连接ID字段会改变用来保护初始数据包的密钥。客户端还将令牌字段设置为重试数据包中提供的令牌。客户端{{< req_level MUST_NOT >}}更改源连接ID因为服务器可能将连接ID作为了它令牌验证逻辑的一部分，详见[第8.1.4章]()。

重试数据包不包含数据包号且不能被客户端显式确认。
