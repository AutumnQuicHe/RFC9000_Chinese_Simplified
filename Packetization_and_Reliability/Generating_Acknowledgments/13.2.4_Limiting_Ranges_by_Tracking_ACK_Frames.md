---
title: "13.2.4 通过追踪ACK帧来限制块"
anchor: "13.2.4_Limiting_Ranges_by_Tracking_ACK_Frames"
weight: 1324
rank: "h3"
---

当发送包含某个**ACK帧**的数据包时，可以记录那个帧中的最大确认数。当接收到包含某个**ACK帧**的数据包的确认时，如果某个数据包的数据包号小于等于为那个**ACK帧**记录的最大确认数，那么接收方就可以不再确认这个数据包。

只发送非ACK触发包，例如**ACK帧**，的接收方可能很长一段时间都接收不到确认。这会导致接收方需要为大量ACK帧的状态维护很长一段时间，同时它发送的**ACK帧**会不必要地变得特别大。在这种情况下，接收方可以偶尔，比如每经过一轮往返时间就进行一次，发送一个**Ping帧**或其他小型的ACK触发帧，来引发来自对端的ACK帧。

在**ACK帧**没有遇到丢包的情况下，这个算法在每至少1RTT内提供一次重排ACK块的机会。在**ACK帧**遇到丢包和乱序的情况下，这个方法并不能保证所有确认都在它们不再被包含进**ACK帧**前就被发送方接收到。数据包还有可能在接收时已经被打乱顺序，或者所有后续包含它们的数据包号的**ACK帧**都遇到丢包。在这种情况下，丢包恢复算法可能引起无效的重传，但是发送方会继续进行有效的传输。
